\documentclass[crop, tikz]{standalone}
\usetikzlibrary{decorations.pathreplacing}
\input{../../style.tex}
\begin{document}
	\def\tensorDistance{\defaultDistanceSmall}
	\def\equationDistance{\defaultDistanceEquations}
	\def\unitaryWidth{0.9*\smallTensorWidth}
	\def\thetaHeight{2.0*\smallTensorWidth}
	\def\unitaryHeight{2.0*\smallTensorWidth}
	\def\verticalDistance{\defaultDistanceNormal}
	\def\svdDistance{0.7*\tensorDistance}
	\begin{tikzpicture}
		
		\node[tensorPhysicalSmall, fill=white] (Q) at (0, 0) {};
		\node[] () at (0, \smallTensorWidth/2+\defaultTextOffsetLarge) {$Q$};
		\node[tensorPhysicalSmall, fill=white] (R) at (\tensorDistance, 0) {};
		\node[] () at (\tensorDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$\Lambda$};
		
		\begin{pgfonlayer}{bg}
			% For correct clipping
			\draw[specialLeg, draw=white] (0, 0) -- ++(-\tensorDistance+\smallTensorWidth/2, 0);
			
			\draw[virtualLegSmall] (Q) -- (R);
			\draw[virtualLegSmall] (R)+(\tensorDistance-\smallTensorWidth/2, 0) -- (R);
			\draw[virtualLegSmall, transform canvas={xshift={\defaultLegSeperationSmall*sin(0)/2}, yshift={-\defaultLegSeperationSmall*cos(0)/2}}] (Q)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (Q);
			\draw[specialLeg, transform canvas={xshift={-\defaultLegSeperationSmall*sin(0)/2}, yshift={\defaultLegSeperationSmall*cos(0)/2}}] (Q)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (Q);
		\end{pgfonlayer}
	
		\node[] () at (\tensorDistance+\tensorDistance-\smallTensorWidth/2+\equationDistance/2, 0) {$=$};
		\def\xOffset{\tensorDistance+2*\tensorDistance-2*\smallTensorWidth/2+\equationDistance}
		
		\node[tensorPhysicalSmall, fill=white] (Q) at (\xOffset, 0) {};
		\node[] () at (\xOffset, \smallTensorWidth/2+\defaultTextOffsetLarge) {$Q$};
		\node[tensorPhysicalSmall, fill=white] (A) at (\xOffset+\tensorDistance, 0) {};
		\node[] () at (\xOffset+\tensorDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$A$};
		\node[tensorPhysicalSmall, fill=white] (S) at (\xOffset+\tensorDistance+\svdDistance, 0) {};
		\node[] () at (\xOffset+\tensorDistance+\svdDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$S$};
		\node[tensorPhysicalSmall, fill=white] (Y) at (\xOffset+\tensorDistance+2*\svdDistance, 0) {};
		\node[] () at (\xOffset+\tensorDistance+2*\svdDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$Y^*$};
		
		\begin{pgfonlayer}{bg}
			\draw[virtualLegSmall] (Q) -- (A);
			\draw[virtualLegSmall] (A) -- (S);
			\draw[virtualLegSmall] (Y) -- (S);
			\draw[virtualLegSmall] (Y)+(\tensorDistance-\smallTensorWidth/2, 0) -- (Y);
			\draw[virtualLegSmall, transform canvas={xshift={\defaultLegSeperationSmall*sin(0)/2}, yshift={-\defaultLegSeperationSmall*cos(0)/2}}] (Q)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (Q);
			\draw[specialLeg, transform canvas={xshift={-\defaultLegSeperationSmall*sin(0)/2}, yshift={\defaultLegSeperationSmall*cos(0)/2}}] (Q)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (Q);
		\end{pgfonlayer}
	
		\node[] () at (\xOffset+2*\tensorDistance+2*\svdDistance-\smallTensorWidth/2+\equationDistance/2, 0) {$=$};
		\def\xOffset{6*\tensorDistance+2*\svdDistance-4*\smallTensorWidth/2+2*\equationDistance}
		
		\node[tensorPhysicalSmall, fill=white] (X) at (\xOffset, 0) {};
		\node[] () at (\xOffset, \smallTensorWidth/2+\defaultTextOffsetLarge) {$X$};
		\node[tensorPhysicalSmall, fill=white] (S) at (\xOffset+\tensorDistance, 0) {};
		\node[] () at (\xOffset+\tensorDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$S$};
		\node[tensorPhysicalSmall, fill=white] (Y) at (\xOffset+2*\tensorDistance, 0) {};
		\node[] () at (\xOffset+2*\tensorDistance, \smallTensorWidth/2+\defaultTextOffsetLarge) {$Y^*$};
		
		\begin{pgfonlayer}{bg}
			\draw[virtualLegSmall] (X) -- (S);
			\draw[virtualLegSmall] (Y) -- (S);
			\draw[virtualLegSmall] (Y)+(\tensorDistance-\smallTensorWidth/2, 0) -- (Y);
			\draw[virtualLegSmall, transform canvas={xshift={\defaultLegSeperationSmall*sin(0)/2}, yshift={-\defaultLegSeperationSmall*cos(0)/2}}] (X)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (X);
			\draw[specialLeg, transform canvas={xshift={-\defaultLegSeperationSmall*sin(0)/2}, yshift={\defaultLegSeperationSmall*cos(0)/2}}] (X)+(-\tensorDistance+\smallTensorWidth/2, 0) -- (X);
		\end{pgfonlayer}
		
	\end{tikzpicture}
\end{document}