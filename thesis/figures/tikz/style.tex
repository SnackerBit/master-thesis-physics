% This file is used to globally define colors, line widths, etc. for diagrams used in the thesis
\usepackage{tikz}
\usepackage{ifthen}

% Libraries
\usetikzlibrary{decorations.markings}
\usetikzlibrary{arrows}

% Basic colors
\definecolor{borderColor}{rgb}{0.0, 0.0, 0.0}
\definecolor{physicalTensorColor}{rgb}{0.757, 0.827, 0.996}
\definecolor{auxillaryTensorColor}{rgb}{1.0, 0.0, 0.0}
\definecolor{orthogonalityCenterColor}{rgb}{1.0, 0.616, 0.0}
\definecolor{physicalLegColor}{rgb}{0.5, 0.5, 0.5}
\definecolor{auxillaryLegColor}{rgb}{1.0, 0.0, 0.0}
\definecolor{virtualLegColor}{rgb}{0.0, 0.0, 0.0}
\definecolor{generalTensorColor}{rgb}{0.757, 0.827, 0.996}
\definecolor{identityColor}{rgb}{1.0, 1.0, 1.0}
<<<<<<< HEAD
<<<<<<< HEAD
\definecolor{redMarkingColor}{rgb}{1.0, 0.0, 0.0}
\definecolor{greenMarkingColor}{rgb}{0.1, 0.8, 0.1}

% Basic sizes
\def \defaultTensorWidth {19pt}
\def \smallTensorWidth {10pt}
=======

% Basic sizes
\def \defaultTensorWidth {19pt}
>>>>>>> 4d788c9927566585e0e5d97c0548041c106e9b2d
=======

% Basic sizes
\def \defaultTensorWidth {19pt}
>>>>>>> 4969d80c4885b9e0e0312ae168d2124e3f884353
\def \defaultLineWidth {2}
\def \xOffsetUnitCell {180pt}
\def \yOffsetUnitCell {180pt}
\def \yOffsetPhysicalLeg {30pt}
\def \defaultArrowscale {0.7}
\def \defaultArrowXShift {7pt}
\def \defaultTextOffset {6pt}
\def \defaultDistanceNormal {40pt}
\def \defaultDistanceEquations {30pt}
\def \identityLegDistance {10 pt}
<<<<<<< HEAD
<<<<<<< HEAD
\def \backgroundopacity {0.5}
=======
>>>>>>> 4d788c9927566585e0e5d97c0548041c106e9b2d
=======
>>>>>>> 4969d80c4885b9e0e0312ae168d2124e3f884353

% Tensor styles
\tikzstyle{tensorPhysical} = [circle, minimum size=\defaultTensorWidth, line width=\defaultLineWidth, fill=physicalTensorColor, draw=borderColor, outer sep=0]
\tikzstyle{tensorAuxillary} = [circle, minimum size=\defaultTensorWidth, line width=\defaultLineWidth, fill=auxillaryTensorColor, draw=borderColor, outer sep=0]
\tikzstyle{tensorOrthoCenter} = [circle, minimum size=\defaultTensorWidth, line width=\defaultLineWidth, fill=orthogonalityCenterColor, draw=borderColor, outer sep=0]

% Leg styles
\tikzstyle{auxillaryLeg} = [color=auxillaryLegColor, line width=\defaultLineWidth, decoration={markings, mark=at position 0.5 with {\pgftransformscale{\defaultArrowscale}\arrow[xshift=\defaultArrowXShift]{triangle 60}}}, postaction={decorate}]
\tikzstyle{physicalLeg} = [color=physicalLegColor, line width=\defaultLineWidth, decoration={markings, mark=at position 0.5 with {\pgftransformscale{\defaultArrowscale}\arrow[xshift=\defaultArrowXShift]{triangle 60}}}, postaction={decorate}]
\tikzstyle{virtualLeg} = [color=virtualLegColor, line width=\defaultLineWidth, decoration={markings, mark=at position 0.5 with {\pgftransformscale{\defaultArrowscale}\arrow[xshift=\defaultArrowXShift]{triangle 60}}}, postaction={decorate}]
\tikzstyle{virtualLegLateArrows} = [color=virtualLegColor, line width=\defaultLineWidth, decoration={markings, mark=at position 0.8 with {\pgftransformscale{\defaultArrowscale}\arrow[xshift=\defaultArrowXShift]{triangle 60}}}, postaction={decorate}]
\tikzstyle{virtualLegWithoutArrows} = [color=virtualLegColor, line width=\defaultLineWidth]
\tikzstyle{physicalLegWithoutArrows} = [color=physicalLegColor, line width=\defaultLineWidth]

% special symbols
\usepackage{amssymb}
\DeclareMathAlphabet{\mathbbb}{U}{bbold}{m}{n}
\newcommand{\id}{\mathbbb{1}}
\newcommand{\iu}{\mathrm{i}}% imaginary unit number i
\newcommand{\Stiefel}{\text{St}(n,p)}


% Layers
\pgfdeclarelayer{bg} % declare background layer
\pgfsetlayers{bg,main} % set order of layersÂ¸

% Command for drawing convex hulls
\newcommand{\convexhull}[2]{
	[   
	create hullnodes/.code={
		\global\edef\namelist{#1}
		\foreach [count=\counter] \nodename in \namelist {
			\global\edef\numberofnodes{\counter}
			\node at (\nodename) [draw=none,name=hullnode\counter] {};
		}
		\node at (hullnode\numberofnodes) [name=hullnode0,draw=none] {};
		\pgfmathtruncatemacro\lastnumber{\numberofnodes+1}
		\node at (hullnode1) [name=hullnode\lastnumber,draw=none] {};
	},
	create hullnodes
	]
	($(hullnode1)!#2!-90:(hullnode0)$)
	\foreach [
	evaluate=\currentnode as \previousnode using \currentnode-1,
	evaluate=\currentnode as \nextnode using \currentnode+1
	] \currentnode in {1,...,\numberofnodes} {
		-- ($(hullnode\currentnode)!#2!-90:(hullnode\previousnode)$)
		let \p1 = ($(hullnode\currentnode)!#2!-90:(hullnode\previousnode) - (hullnode\currentnode)$),
		\n1 = {atan2(\y1,\x1)},
		\p2 = ($(hullnode\currentnode)!#2!90:(hullnode\nextnode) - (hullnode\currentnode)$),
		\n2 = {atan2(\y2,\x2)},
		\n{delta} = {-Mod(\n1-\n2,360)}
		in 
		{arc [start angle=\n1, delta angle=\n{delta}, radius=#2]}
	}
	-- cycle
}